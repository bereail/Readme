{"ast":null,"code":"import React,{useState}from'react';import{buscarLibros,guardarLibro}from'../../api/libros';import LibroCard from'./LibroCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BuscarLibro(){const[query,setQuery]=useState('');const[resultados,setResultados]=useState([]);const handleBuscar=async()=>{try{const res=await buscarLibros(query);setResultados(res.data);}catch(err){console.error('Error al buscar libros',err);}};const handleGuardar=async libro=>{const payload={isbn:libro.isbn||'',titulo:libro.titulo||'',autor:libro.autor||'',anio:libro.anio||null,portada:libro.portada||'',id_usuario:1};try{await guardarLibro(payload);alert('📘 Libro guardado correctamente');}catch(err){console.error('❌ Error al guardar el libro',err);}};const handleSeleccionar=libro=>{localStorage.setItem('libro_seleccionado',JSON.stringify(libro));window.location.href='/seleccionar-lectura';};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"T\\xEDtulo del libro\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleBuscar,children:\"Buscar\"})]}),resultados.map((libro,index)=>/*#__PURE__*/_jsx(LibroCard,{libro:libro,onGuardar:handleGuardar,onSeleccionar:handleSeleccionar},index))]});}export default BuscarLibro;","map":{"version":3,"names":["React","useState","buscarLibros","guardarLibro","LibroCard","jsx","_jsx","jsxs","_jsxs","BuscarLibro","query","setQuery","resultados","setResultados","handleBuscar","res","data","err","console","error","handleGuardar","libro","payload","isbn","titulo","autor","anio","portada","id_usuario","alert","handleSeleccionar","localStorage","setItem","JSON","stringify","window","location","href","children","className","type","value","onChange","e","target","placeholder","onClick","map","index","onGuardar","onSeleccionar"],"sources":["D:/Bere/GIT/readme/front/src/components/books/BuscarLibro.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { buscarLibros, guardarLibro } from '../../api/libros';\r\nimport LibroCard from './LibroCard';\r\n\r\nfunction BuscarLibro() {\r\n  const [query, setQuery] = useState('');\r\n  const [resultados, setResultados] = useState([]);\r\n\r\n  const handleBuscar = async () => {\r\n    try {\r\n      const res = await buscarLibros(query);\r\n      setResultados(res.data);\r\n    } catch (err) {\r\n      console.error('Error al buscar libros', err);\r\n    }\r\n  };\r\n\r\n  const handleGuardar = async (libro) => {\r\n    const payload = {\r\n      isbn: libro.isbn || '',\r\n      titulo: libro.titulo || '',\r\n      autor: libro.autor || '',\r\n      anio: libro.anio || null,\r\n      portada: libro.portada || '',\r\n      id_usuario: 1,\r\n    };\r\n\r\n    try {\r\n      await guardarLibro(payload);\r\n      alert('📘 Libro guardado correctamente');\r\n    } catch (err) {\r\n      console.error('❌ Error al guardar el libro', err);\r\n    }\r\n  };\r\n\r\n  const handleSeleccionar = (libro) => {\r\n    localStorage.setItem('libro_seleccionado', JSON.stringify(libro));\r\n    window.location.href = '/seleccionar-lectura';\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"input-group mb-3\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"Título del libro\"\r\n        />\r\n        <button className=\"btn btn-primary\" onClick={handleBuscar}>\r\n          Buscar\r\n        </button>\r\n      </div>\r\n\r\n      {resultados.map((libro, index) => (\r\n        <LibroCard\r\n          key={index}\r\n          libro={libro}\r\n          onGuardar={handleGuardar}\r\n          onSeleccionar={handleSeleccionar}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BuscarLibro;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,YAAY,CAAEC,YAAY,KAAQ,kBAAkB,CAC7D,MAAO,CAAAC,SAAS,KAAM,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpC,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACW,UAAU,CAAEC,aAAa,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAAa,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAb,YAAY,CAACQ,KAAK,CAAC,CACrCG,aAAa,CAACE,GAAG,CAACC,IAAI,CAAC,CACzB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEF,GAAG,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAG,aAAa,CAAG,KAAO,CAAAC,KAAK,EAAK,CACrC,KAAM,CAAAC,OAAO,CAAG,CACdC,IAAI,CAAEF,KAAK,CAACE,IAAI,EAAI,EAAE,CACtBC,MAAM,CAAEH,KAAK,CAACG,MAAM,EAAI,EAAE,CAC1BC,KAAK,CAAEJ,KAAK,CAACI,KAAK,EAAI,EAAE,CACxBC,IAAI,CAAEL,KAAK,CAACK,IAAI,EAAI,IAAI,CACxBC,OAAO,CAAEN,KAAK,CAACM,OAAO,EAAI,EAAE,CAC5BC,UAAU,CAAE,CACd,CAAC,CAED,GAAI,CACF,KAAM,CAAAzB,YAAY,CAACmB,OAAO,CAAC,CAC3BO,KAAK,CAAC,iCAAiC,CAAC,CAC1C,CAAE,MAAOZ,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAEF,GAAG,CAAC,CACnD,CACF,CAAC,CAED,KAAM,CAAAa,iBAAiB,CAAIT,KAAK,EAAK,CACnCU,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAEC,IAAI,CAACC,SAAS,CAACb,KAAK,CAAC,CAAC,CACjEc,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,sBAAsB,CAC/C,CAAC,CAED,mBACE7B,KAAA,QAAA8B,QAAA,eACE9B,KAAA,QAAK+B,SAAS,CAAC,kBAAkB,CAAAD,QAAA,eAC/BhC,IAAA,UACEkC,IAAI,CAAC,MAAM,CACXD,SAAS,CAAC,cAAc,CACxBE,KAAK,CAAE/B,KAAM,CACbgC,QAAQ,CAAGC,CAAC,EAAKhC,QAAQ,CAACgC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC1CI,WAAW,CAAC,qBAAkB,CAC/B,CAAC,cACFvC,IAAA,WAAQiC,SAAS,CAAC,iBAAiB,CAACO,OAAO,CAAEhC,YAAa,CAAAwB,QAAA,CAAC,QAE3D,CAAQ,CAAC,EACN,CAAC,CAEL1B,UAAU,CAACmC,GAAG,CAAC,CAAC1B,KAAK,CAAE2B,KAAK,gBAC3B1C,IAAA,CAACF,SAAS,EAERiB,KAAK,CAAEA,KAAM,CACb4B,SAAS,CAAE7B,aAAc,CACzB8B,aAAa,CAAEpB,iBAAkB,EAH5BkB,KAIN,CACF,CAAC,EACC,CAAC,CAEV,CAEA,cAAe,CAAAvC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}