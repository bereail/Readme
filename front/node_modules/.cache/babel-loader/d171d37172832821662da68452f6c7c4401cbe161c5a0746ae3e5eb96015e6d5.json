{"ast":null,"code":"// ‚úÖ src/components/books/GuardarLectura.jsx\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{guardarLectura}from'../../api/libros';import BuscarLibro from'./BuscarLibro';// ‚¨ÖÔ∏è Asegurate que esta importaci√≥n sea correcta\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function GuardarLectura(){const[libro,setLibro]=useState(null);const[fechaInicio,setFechaInicio]=useState('');const[fechaFin,setFechaFin]=useState('');const[lugarFin,setLugarFin]=useState('');const[puntaje,setPuntaje]=useState('');const[comentario,setComentario]=useState('');const navigate=useNavigate();useEffect(()=>{const libroGuardado=localStorage.getItem(\"libro_seleccionado\");if(libroGuardado){const parsedLibro=JSON.parse(libroGuardado);parsedLibro.imagen_url=parsedLibro.imagen_url||parsedLibro.portada||'';setLibro(parsedLibro);}},[]);const handleSubmit=async e=>{e.preventDefault();const payload={usuario_id:1,isbn:(libro===null||libro===void 0?void 0:libro.isbn)||'',titulo:(libro===null||libro===void 0?void 0:libro.titulo)||'',autor:(libro===null||libro===void 0?void 0:libro.autor)||'',imagen_url:(libro===null||libro===void 0?void 0:libro.imagen_url)||'',fecha_inicio:fechaInicio||null,fecha_fin:fechaFin||null,lugar_fin:lugarFin||null,puntaje:puntaje?parseInt(puntaje):null,comentario:comentario||''};try{await guardarLectura(payload);localStorage.removeItem(\"libro_seleccionado\");alert(\"‚úÖ Lectura registrada\");navigate('/mis-lecturas');}catch(err){console.error('‚ùå Error al guardar la lectura',err);}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:!libro?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(BuscarLibro,{})}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"p-3 border rounded\",children:[libro.imagen_url&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:libro.imagen_url,alt:\"Portada\",style:{width:'120px',height:'180px',objectFit:'cover'},onError:e=>{e.target.src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/480px-No_image_available.svg.png\";}})}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-center\",children:libro.titulo}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC5 Fecha de inicio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:fechaInicio,onChange:e=>setFechaInicio(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCC5 Fecha de fin\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control\",value:fechaFin,onChange:e=>setFechaFin(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCCD Lugar donde lo terminaste\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:lugarFin,onChange:e=>setLugarFin(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u2B50 Puntaje (1-10)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:puntaje,onChange:e=>setPuntaje(e.target.value),min:\"1\",max:\"10\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uD83D\\uDCAC Comentario\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:comentario,onChange:e=>setComentario(e.target.value),rows:\"3\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success\",children:\"\\uD83D\\uDCD8 Guardar lectura\"})})]})});}export default GuardarLectura;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","guardarLectura","BuscarLibro","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GuardarLectura","libro","setLibro","fechaInicio","setFechaInicio","fechaFin","setFechaFin","lugarFin","setLugarFin","puntaje","setPuntaje","comentario","setComentario","navigate","libroGuardado","localStorage","getItem","parsedLibro","JSON","parse","imagen_url","portada","handleSubmit","e","preventDefault","payload","usuario_id","isbn","titulo","autor","fecha_inicio","fecha_fin","lugar_fin","parseInt","removeItem","alert","err","console","error","className","children","onSubmit","src","alt","style","width","height","objectFit","onError","target","type","value","onChange","min","max","rows"],"sources":["D:/Bere/GIT/readme/front/src/components/books/GuardarLectura.jsx"],"sourcesContent":["// ‚úÖ src/components/books/GuardarLectura.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { guardarLectura } from '../../api/libros';\r\nimport BuscarLibro from './BuscarLibro'; // ‚¨ÖÔ∏è Asegurate que esta importaci√≥n sea correcta\r\n\r\nfunction GuardarLectura() {\r\n  const [libro, setLibro] = useState(null);\r\n  const [fechaInicio, setFechaInicio] = useState('');\r\n  const [fechaFin, setFechaFin] = useState('');\r\n  const [lugarFin, setLugarFin] = useState('');\r\n  const [puntaje, setPuntaje] = useState('');\r\n  const [comentario, setComentario] = useState('');\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const libroGuardado = localStorage.getItem(\"libro_seleccionado\");\r\n    if (libroGuardado) {\r\n      const parsedLibro = JSON.parse(libroGuardado);\r\n      parsedLibro.imagen_url = parsedLibro.imagen_url || parsedLibro.portada || '';\r\n      setLibro(parsedLibro);\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const payload = {\r\n      usuario_id: 1,\r\n      isbn: libro?.isbn || '',\r\n      titulo: libro?.titulo || '',\r\n      autor: libro?.autor || '',\r\n      imagen_url: libro?.imagen_url || '',\r\n      fecha_inicio: fechaInicio || null,\r\n      fecha_fin: fechaFin || null,\r\n      lugar_fin: lugarFin || null,\r\n      puntaje: puntaje ? parseInt(puntaje) : null,\r\n      comentario: comentario || ''\r\n    };\r\n\r\n    try {\r\n      await guardarLectura(payload);\r\n      localStorage.removeItem(\"libro_seleccionado\");\r\n      alert(\"‚úÖ Lectura registrada\");\r\n      navigate('/mis-lecturas');\r\n    } catch (err) {\r\n      console.error('‚ùå Error al guardar la lectura', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3\">\r\n      {!libro ? (\r\n        <>\r\n          <BuscarLibro />\r\n        </>\r\n      ) : (\r\n        <form onSubmit={handleSubmit} className=\"p-3 border rounded\">\r\n          {libro.imagen_url && (\r\n            <div className=\"text-center mb-3\">\r\n              <img\r\n                src={libro.imagen_url}\r\n                alt=\"Portada\"\r\n                style={{ width: '120px', height: '180px', objectFit: 'cover' }}\r\n                onError={(e) => {\r\n                  e.target.src = \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/480px-No_image_available.svg.png\";\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <h4 className=\"text-center\">{libro.titulo}</h4>\r\n\r\n          <div className=\"mb-2\">\r\n            <label>üìÖ Fecha de inicio</label>\r\n            <input type=\"date\" className=\"form-control\" value={fechaInicio} onChange={(e) => setFechaInicio(e.target.value)} />\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <label>üìÖ Fecha de fin</label>\r\n            <input type=\"date\" className=\"form-control\" value={fechaFin} onChange={(e) => setFechaFin(e.target.value)} />\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <label>üìç Lugar donde lo terminaste</label>\r\n            <input type=\"text\" className=\"form-control\" value={lugarFin} onChange={(e) => setLugarFin(e.target.value)} />\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <label>‚≠ê Puntaje (1-10)</label>\r\n            <input type=\"number\" className=\"form-control\" value={puntaje} onChange={(e) => setPuntaje(e.target.value)} min=\"1\" max=\"10\" />\r\n          </div>\r\n          <div className=\"mb-2\">\r\n            <label>üí¨ Comentario</label>\r\n            <textarea className=\"form-control\" value={comentario} onChange={(e) => setComentario(e.target.value)} rows=\"3\" />\r\n          </div>\r\n\r\n          <div className=\"text-center\">\r\n            <button type=\"submit\" className=\"btn btn-success\">üìò Guardar lectura</button>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GuardarLectura"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}